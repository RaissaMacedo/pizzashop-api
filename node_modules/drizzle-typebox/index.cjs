"use strict";var e=require("@sinclair/typebox"),t=require("drizzle-orm"),r=require("drizzle-orm/mysql-core"),n=require("drizzle-orm/pg-core"),a=require("drizzle-orm/sqlite-core");const i=e.Type.Union([e.Type.String(),e.Type.Number(),e.Type.Boolean(),e.Type.Null()]),s=e.Type.Union([i,e.Type.Array(e.Type.Any()),e.Type.Record(e.Type.String(),e.Type.Any())]),o=t=>e.Type.Union([t,e.Type.Null()]);const y=/^[\dA-Fa-f]{8}(?:-[\dA-Fa-f]{4}){3}-[\dA-Fa-f]{12}$/;function l(i){let o;if(function(e){return"enumValues"in e&&Array.isArray(e.enumValues)&&e.enumValues.length>0}(i)&&(o=i.enumValues?.length?e.Type.Union(i.enumValues.map((t=>e.Type.Literal(t)))):e.Type.String()),!o)if("custom"===i.dataType)o=e.Type.Any();else if("json"===i.dataType)o=s;else if("array"===i.dataType)o=e.Type.Array(l(i.baseColumn));else if("number"===i.dataType)o=e.Type.Number();else if("bigint"===i.dataType)o=e.Type.BigInt();else if("boolean"===i.dataType)o=e.Type.Boolean();else if("date"===i.dataType)o=e.Type.Date();else if("string"===i.dataType){const s=e.Type.String();(t.is(i,n.PgChar)||t.is(i,n.PgVarchar)||t.is(i,r.MySqlVarChar)||t.is(i,r.MySqlVarBinary)||t.is(i,r.MySqlChar)||t.is(i,a.SQLiteText))&&"number"==typeof i.length&&(s.maxLength=i.length),o=s}else t.is(i,n.PgUUID)&&(o=e.Type.RegEx(y));return o||(o=e.Type.Any()),o}exports.Nullable=o,exports.createInsertSchema=function(r,n){const a=t.getTableColumns(r),i=Object.entries(a);let s=Object.fromEntries(i.map((([e,t])=>[e,l(t)])));n&&(s=Object.assign(s,Object.fromEntries(Object.entries(n).map((([e,t])=>[e,"function"==typeof t?t(s):t])))));for(const[t,r]of i)r.notNull?r.hasDefault&&(s[t]=e.Type.Optional(s[t])):s[t]=e.Type.Optional(o(s[t]));return e.Type.Object(s)},exports.createSelectSchema=function(r,n){const a=t.getTableColumns(r),i=Object.entries(a);let s=Object.fromEntries(i.map((([e,t])=>[e,l(t)])));n&&(s=Object.assign(s,Object.fromEntries(Object.entries(n).map((([e,t])=>[e,"function"==typeof t?t(s):t])))));for(const[e,t]of i)t.notNull||(s[e]=o(s[e]));return e.Type.Object(s)},exports.jsonSchema=s;
//# sourceMappingURL=index.cjs.map
